{"version":3,"file":"bundles.js","mappings":"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","sources":["webpack://js-chat/./src/constants.js","webpack://js-chat/./src/services.js","webpack://js-chat/./src/state.js","webpack://js-chat/./src/view.js","webpack://js-chat/webpack/bootstrap","webpack://js-chat/webpack/runtime/define property getters","webpack://js-chat/webpack/runtime/hasOwnProperty shorthand","webpack://js-chat/webpack/runtime/make namespace object","webpack://js-chat/./src/index.js"],"sourcesContent":["export const MESSAGES = {\n    \"auth-missing\": \"\",\n    \"network-error\": \"No network. Please check your Internet connection.\",\n    \"required-username\": \"Username can only contain letters and/or numbers\",\n    \"auth-insufficient\": \"Username cannot be 'dog'\",\n    \"invalid-word\": \"Word cannot contain numbers or symbols\",\n    default: \"Something went wrong, please come back later\",\n  };","//interacting with external APIs or back-end services\n//fetch or update data from the server\n//e.g, user input -> send to server -> communicate with server via service.js - Handle Server Response\n//update application states - Reflect State Changes in UI\n\n\n//retrieving session data,\nexport function fetchSession() {\n  return fetch(\"/api/v1/session\")\n    .catch((err) => Promise.reject({ error: \"network-error\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchLogin(username) {\n  return fetch(\"/api/v1/session/\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({ username }),\n  })\n    .catch((err) => Promise.reject({ error: \"network-error\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchLogout() {\n  return fetch(\"/api/v1/session\", {\n    method: \"DELETE\",\n  })\n    .catch((err) => Promise.reject({ error: \"network-error\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json(); // This return is fairly useless\n    });\n}\n\nexport function sendMessage(newMessage) {\n  return fetch(\"/api/v1/messages\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({ newMessage }),\n  })\n    .catch((err) => Promise.reject({ error: \"network-error\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchDeleteMessage(id) {\n  return fetch(`/api/v1/messages/${id}`, {\n    method: \"DELETE\",\n  })\n    .catch(() => Promise.reject({ error: \"networkError\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchEditMessage({ id, editedMessage }) {\n  return fetch(`/api/v1/messages/${id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ editedMessage }),\n  })\n    .catch(() => Promise.reject({ error: \"networkError\" }))\n    .then((response) => {\n      if (!response.ok) {\n        return response.json().then((err) => Promise.reject(err));\n      }\n      return response.json();\n    });\n}","//single-page applications (SPAs) , front end\n//inital state/state management (logging in, logging out, updating active users...)/state variables (isLoggedIn, activeUsers, message)\n\nimport { MESSAGES } from \"./constants\";\n\n\nexport const state = {\n    activeUsers: {},\n    messages: {}, \n    isLoggedIn: false, \n    isLoginPending: false, \n    isPageLoading: false, \n    username: \"\", \n    recipient: \"\", \n    error: \"\",\n    timeId:\"\", \n    editingMessageId:\"\", \n}\n\n\nexport function waitOnLogin() {\n    state.isLoggedIn = false;\n    state.isLoginPending = true;\n    state.username = \"\";\n    state.recipient = \"\";\n    state.activeUsers = {};\n    state.messages = {};\n    state.error = \"\";\n}\n\n\nexport function login(username) {\n    state.isLoggedIn = true;\n    state.isLoginPending = false;\n    state.username = username;\n    state.error = \"\";\n}\n  \nexport function logout() {\n    state.isLoggedIn = false;\n    state.isLoginPending = false;\n    state.username = \"\";\n    state.recipient = \"\";\n    state.activeUsers = {};\n    state.messages = {};\n}\n\n\nexport function waitOnload() {\n    state.isPageLoading = true;\n}\n  \nexport function setLoad() {\n    state.isPageLoading = false;\n}\n\n\nexport function updateActiveUsers(activeUsers) {\n    state.activeUsers = { ...activeUsers }; \n}\n\n\nexport function updateMessages(messages) {\n    state.messages = { ...messages }; \n}\n\n\nexport function addMessage(newMessage) {\n    state.messages = { ...state.messages, [newMessage.id]: newMessage };\n}\n  \nexport function deleteMessage(id) {\n    delete state.messages[id];\n}\n\nexport function setEditingMessageId(id) {\n    state.editingMessageId = id;\n}\n\nexport function editMessage({ id, editedMessage }) {\n    if (state.messages[id]) { \n        state.messages[id].text = editedMessage;\n    }\n}\n\nexport function setError(error) {\n    if (!error) {\n      console.log(\"no error\");\n      state.error = \"\";\n      return;\n    }\n  \n    if (error === \"auth-missing\") {\n      return;\n    }\n  \n    state.isLoginPending = false;\n    state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;","import { updateActiveUsers, updateMessages, logout } from \"./state\";\nimport { fetchSession } from \"./services\";\n\nexport function dynamicContent({ appEl, state }) {\n  fetchSession()\n    .then((data) => {\n      updateActiveUsers(data.activeUsers);\n      updateMessages(data.channelMessages);\n\n      const usersHtml = generateActiveUsersList(state);\n      const messagesHtml = generateMessagesList(state);\n\n      document.querySelector(\".users-list\").innerHTML = usersHtml;\n      document.querySelector(\".messages-list\").innerHTML = messagesHtml;\n    })\n    .catch((err) => {\n      console.log(err);\n      logout();\n      fetchLogout()\n        .then(() => {\n          render({ appEl, state });\n        })\n        .catch((err) => {\n          console.log(err);\n          render({ appEl, state });\n        });\n    });\n}\n\nfunction render({ appEl, state }) {\n  const html = `\n    <header>${generateHeader(state)}</header>\n    <main class='main'>\n      ${generateLoginHtml(state)}\n      ${generateActiveUsersList(state)}\n      ${generateMessageArea(state)}\n    </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateLoginHtml(state) {\n  if (state.isLoggedIn) {\n    return ``;\n  }\n\n  if (state.isLoginPending) {\n    return `\n    <div>Logging in...</div>\n    `;\n  }\n\n  return `\n    <div class='form-container'>\n      <form class='login-form'>\n        <label class='form-label' for='username' />\n          Username:\n        <input class='username' id='username' name='username' placeholder='Enter username' />\n        <div class='form-button-container'>\n          <button class='button-login' type='submit'>Login</button>\n        </div>\n      </form>\n      <p class='error-message'>${state.error}</p>\n    </div>\n  `;\n}\n\nfunction generateHeader(state) {\n  if (!state.isLoggedIn) {\n    return \"\";\n  }\n\n  return `\n      <header>\n        <div class='header-control'>\n          <span class='header-greeting'>Hello, ${state.username}</span>\n          <form class=\"form-logout\">\n            <button class=\"button-logout\" type=\"submit\">Logout</button>\n          </form>\n        </div>\n      </header>\n  `;\n}\n\nfunction generateActiveUsersList(state) {\n  if (!state.isLoggedIn) {\n    return \"\";\n  }\n\n  if (state.isPageLoading) {\n    return `\n    <ul class=users-list>Loading...</ul>\n    `;\n  }\n\n  return `\n      <ul class='users-list'>\n      ${Object.keys(state.activeUsers)\n        .map(\n          (user) =>\n            `\n        <li class='user-single' data-username=${user}>\n          <i class='fas fa-user user-icon'></i>\n          <span class='user-name'>${user}</span>\n        </li>\n        `\n        )\n        .join(\"\")}\n        </ul>\n    `;\n}\n\nfunction generateMessageArea(state) {\n  if (!state.isLoggedIn) {\n    return \"\";\n  }\n\n  return `\n    <div class='message-area'>\n      ${generateMessagesList(state)}\n      ${generateWriteMessage(state)}\n    </div>\n  `;\n}\n\nfunction generateMessagesList(state) {\n  if (!state.isLoggedIn || state.isPrivateChatOn) {\n    return \"\";\n  }\n\n  if (state.isPageLoading) {\n    return `\n      <ul class='messages-list'>Loading...</ul>\n    `;\n  }\n\n  return `\n  <ul class='messages-list'>\n    ${Object.keys(state.messages)\n      .map((messageId) => {\n        const message = state.messages[messageId];\n        if (state.editingMessageId === messageId) {\n          return `\n          <li class='sent-message-container'>\n            <span class='sender-name'>\n            ${message.sender}\n            </span>\n            <form class='edit-form'>\n              <input class='edit-message' name='editMessage' value='${message.text}'/>\n            <button class='button-submit' type='submit'>Save</button>\n            </form>\n          </li>\n        `;\n        } else {\n          return `\n          <li class='sent-message-container'>\n            <span class='sender-name'>\n              ${message.sender}\n            </span>\n            <div class=\"text-container\">\n              <span class=\"message-text\">\n                ${message.text}\n              </span>\n              ${\n                message.sender === state.username\n                  ? `\n                    <div class='text-button-container'>\n                      <button \n                        class='button-delete' \n                        type='button'\n                        data-id='${message.id}'\n                        data-sender='${message.sender}'\n                      >\n                        Delete\n                      </button>\n                      <button \n                        class='button-edit'\n                        type='button'\n                        data-id='${message.id}'\n                        data-sender='${message.sender}'\n                      >\n                        Edit\n                      </button>\n                    </div>\n                  `\n                  : \"\"\n              }\n            </div>\n          </li>\n        `;\n        }\n      })\n      .join(\"\")}\n  </ul>\n`;\n}\n\nfunction generateWriteMessage(state) {\n  if (!state.isLoggedIn) {\n    return \"\";\n  }\n\n  return `\n    <form class=\"sender-form\">\n      <div class=\"write-message-container\">\n        <textarea class=\"sender-message\" name=\"text\" placeholder=\"Enter message...\"></textarea>\n        <div class=\"button-container\">\n          <button class=\"submit-button\" type=\"submit\">Send</button>\n        </div>\n      </div>\n    </form>\n  `;\n}\n\nexport default render;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","//controller \nimport state, {\n  waitOnLogin,\n  login,\n  logout,\n  waitOnload,\n  setLoad,\n  updateActiveUsers,\n  updateMessages,\n  addMessage,\n  deleteMessage,\n  setError,\n  setEditingMessageId,\n  editMessage,\n} from \"./state.js\";\n\nimport {\n  fetchSession,\n  fetchLogin,\n  fetchLogout,\n  sendMessage,\n  fetchDeleteMessage,\n  fetchEditMessage,\n} from \"./services.js\";\n\nimport render, { dynamicContent } from \"./view.js\";\n\nconst appEl = document.querySelector(\"#app\");\n\n// Regular Polling\nfunction startDynamicRendering({ appEl, state }) {\n  const { timeId } = state.timeId;\n\n  clearTimeout(timeId);\n\n  const newTimeId = setTimeout(() => {\n    console.log(\"Dynamic rendering...\");\n    dynamicContent({ appEl, state });\n    startDynamicRendering({ appEl, state });\n  }, 500000);\n\n  state.timeId = newTimeId;\n}\n\nfunction stopDynamicRendering() {\n  const { timeId } = state.timeId;\n  clearTimeout(timeId);\n  state.timeId = \"\";\n}\n\n// Auto scrolling to bottom\nfunction scrollToBottom() {\n  const messageContainer = document.querySelector(\".messages-list\");\n\n  if (messageContainer) {\n    messageContainer.scrollTop = messageContainer.scrollHeight;\n  }\n}\n\n// Listen to submit events\nappEl.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n\n  // Login\n  if (e.target.classList.contains(\"login-form\")) {\n    const username = document.querySelector(\".username\").value;\n    waitOnLogin();\n    render({ appEl, state });\n\n    // Async stuff\n    fetchLogin(username)\n      .then(() => {\n        waitOnload();\n        render({ appEl, state });\n        return fetchSession();\n      })\n      .then((data) => {\n        login(data.username);\n        setLoad();\n        updateActiveUsers(data.activeUsers);\n        updateMessages(data.channelMessages);\n        render({ appEl, state });\n        startDynamicRendering({ appEl, state });\n      })\n      .catch((err) => {\n        console.log(err.error);\n        setError(err.error);\n        render({ appEl, state });\n      });\n  }\n\n  // Post message\n  if (e.target.classList.contains(\"sender-form\")) {\n    const messageText = document.querySelector(\".sender-message\").value;\n\n    sendMessage(messageText)\n      .then((message) => {\n        addMessage(message);\n        render({ appEl, state });\n        scrollToBottom();\n      })\n      .catch((err) => {\n        console.log(err);\n        logout();\n        fetchLogout()\n          .then(() => {\n            render({ appEl, state });\n          })\n          .catch((err) => {\n            console.log(err);\n            render({ appEl, state });\n          });\n      });\n  }\n\n  // Save edit message\n  if (e.target.classList.contains(\"edit-form\")) {\n    const editedMessage = document.querySelector(\".edit-message\").value;\n\n    // Get the id of the message to be replaced\n    const id = state.editingMessageId;\n\n    fetchEditMessage({ id, editedMessage })\n      .then((data) => {\n        editMessage({ id, editedMessage });\n        setEditingMessageId(\"\");\n        render({ appEl, state });\n      })\n      .catch((err) => {\n        console.log(err);\n        render({ appEl, state });\n        logout();\n        fetchLogout()\n          .then(() => {\n            render({ appEl, state });\n          })\n          .catch((err) => {\n            console.log(err);\n            render({ appEl, state });\n          });\n      });\n  }\n});\n\n// Listen to click events\nappEl.addEventListener(\"click\", (e) => {\n  // Logout\n  if (e.target.classList.contains(\"button-logout\")) {\n    logout();\n    fetchLogout()\n      .then(() => {\n        stopDynamicRendering();\n        render({ appEl, state });\n      })\n      .catch((err) => {\n        console.log(err);\n        render({ appEl, state });\n      });\n  }\n\n  // Delete message\n  if (e.target.classList.contains(\"button-delete\")) {\n    const sender = e.target.dataset.sender;\n    const currentUser = state.username;\n\n    // Find the message id\n    const id = e.target.dataset.id;\n\n    if (sender === currentUser) {\n      fetchDeleteMessage(id)\n        .then((data) => {\n          deleteMessage(id);\n          render({ appEl, state });\n        })\n        .catch((err) => {\n          console.log(err);\n          render({ appEl, state });\n          logout();\n          fetchLogout()\n            .then(() => {\n              render({ appEl, state });\n            })\n            .catch((err) => {\n              console.log(err);\n              render({ appEl, state });\n            });\n        });\n    }\n  }\n\n  // Edit message\n  if (e.target.classList.contains(\"button-edit\")) {\n    // I can only delete/edit my messages\n    // The check is done on the UI, where only my message can display delete/edit buttons\n    const sender = e.target.dataset.sender;\n    const currentUser = state.username;\n    const id = e.target.dataset.id;\n\n    if (sender === currentUser) {\n      setEditingMessageId(id);\n      render({ appEl, state });\n    }\n    // Now we have edit form which is a submit event\n  }\n});\n\n// On load\nfetchSession()\n  .then((data) => {\n    login(data.username);\n    updateActiveUsers(data.activeUsers);\n    updateMessages(data.channelMessages);\n    render({ appEl, state });\n    data.username && startDynamicRendering({ appEl, state });\n  })\n  .catch((err) => {\n    setError(err.error);\n    render({ appEl, state });\n  });"],"names":["MESSAGES","fetchSession","fetch","err","Promise","reject","error","then","response","ok","json","fetchLogin","username","method","headers","body","JSON","stringify","fetchLogout","sendMessage","newMessage","fetchDeleteMessage","id","concat","fetchEditMessage","_ref","editedMessage","state","activeUsers","messages","isLoggedIn","isLoginPending","isPageLoading","recipient","timeId","editingMessageId","waitOnLogin","login","logout","waitOnload","setLoad","updateActiveUsers","_objectSpread","updateMessages","addMessage","_defineProperty","deleteMessage","setEditingMessageId","editMessage","text","setError","console","log","dynamicContent","appEl","data","channelMessages","usersHtml","generateActiveUsersList","messagesHtml","generateMessagesList","document","querySelector","innerHTML","render","_ref2","html","generateHeader","generateLoginHtml","generateMessageArea","Object","keys","map","user","join","generateWriteMessage","isPrivateChatOn","messageId","message","sender","startDynamicRendering","clearTimeout","newTimeId","setTimeout","stopDynamicRendering","scrollToBottom","messageContainer","scrollTop","scrollHeight","addEventListener","e","preventDefault","target","classList","contains","value","messageText","dataset","currentUser"],"sourceRoot":""}